<div class="columns section mediumlarge-4 large-3">

  <% if component_settings.display_progress_enabled? && result.progress.present? %>
    <div class="progress-level section">
      <div class="progress-label">
        <span class="progress-text"><%= t("models.result.fields.progress", scope: "decidim.accountability") %>:</span>
        <span class="progress-figure">
          <%= display_percentage result.progress %>
        </span>
      </div>

      <div class="progress">
        <div class="progress-meter" style="width:<%= result.progress %>%"></div>
      </div>

      <p class="text-small">
        <%= t(".average_progress", progress: display_percentage(progress_calculator(current_scope, nil))) %>
      </p>
    </div>
  <% end %>

  <% if result.result_all_details.any? || !result.scope.nil? || !result.category.nil? %>
    <%= result_detail_info(result) do %>
      <% result.result_all_details.each do |detail| %>
        <div class="definition-data__item result_detail">
          <span class="definition-data__icon">
            <%= result_detail_icon(result, detail) %>
          </span>
          <span class="definition-data__info">
            <% if translated_attribute(detail.description_for(result)).empty? %>
              <span class="definition-data__title"><%= translated_attribute detail.title %></span>
            <% else %>
              <span class="definition-data__title with_description"><%= translated_attribute detail.title %></span>
              <span class="definition-data__description"><%= translated_attribute detail.description_for(result) %></span>
            <% end %>
          </span>
        </div>
      <% end %>

      <% if result.scope %>
        <div class="definition-data__item result_detail">
          <span class="definition-data__icon">
            <%= result_detail_icon(result) %>
          </span>
          <span class="definition-data__info">
            <span class="definition-data__title with_description"><%= t("results.show.stats.scope", scope: "decidim.accountability") %></span>
            <span class="definition-data__description"><%= translated_attribute result.scope.name %></span>
          </span>
        </div>
      <% end %>

      <% if result.category %>
        <div class="definition-data__item result_detail">
          <span class="definition-data__icon">
            <%= result_detail_icon(result) %>
          </span>
          <span class="definition-data__info">
            <span class="definition-data__title with_description"><%= t("results.show.stats.category", scope: "decidim.accountability") %></span>
            <span class="definition-data__description"><%= translated_attribute result.category.name %></span>
          </span>
        </div>
      <% end %>
    <% end %>
  <% end %>

  <%= resource_reference(result) %>
  <%= render partial: "decidim/shared/share_modal" %>
  <%= embed_modal_for result_result_widget_url(result, format: :js) %>
</div>
